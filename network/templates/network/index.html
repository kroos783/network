{% extends "network/layout.html" %} 
{% load static %} 
{% block body %} 
{% if user.is_authenticated %}
<div id="compose-view">
  <h3>New Post</h3>
  <form id="compose-form">
    {% csrf_token %}
    <div class="form-group">
      From:
      <input
        disabled
        class="form-control"
        id="compose-user"
        value="{{ request.user.username }}"
      />
    </div>
    <textarea
      class="form-control"
      id="compose-body"
      placeholder="Body"
    ></textarea>
    <input type="submit" class="btn btn-primary" />
  </form>
</div>
{% else %}
<div id="compose-view">
  <h3>New Post</h3>
  <form id="compose-form">
    {% csrf_token %}
    <div class="form-group">
      From:
      <input
        disabled
        class="form-control"
        id="compose-user"
        value="{{ request.user.username }}"
      />
    </div>
    <textarea
      disabled
      class="form-control"
      id="compose-body"
      placeholder="Body"
    ></textarea>
    <input disabled type="submit" class="btn btn-primary" />
  </form>
  <p>To send a post, you need to be <a href="{% url 'login' %}">log in</a> or <a href="{% url 'register' %}">create an account</a>.</p>
</div>
{% endif %}


{% for post in posts %}
<div id="posts_view">
  <div class="owner col-3"> From : <a href="{% url 'userPage' post.user %}"><strong>{{post.user}}</strong></a></div>
  <div class="body col-5"> Message : <strong>{{post.body}}</strong></div>

  {% if request.user.is_authenticated %}
    <div id="likeunlike">
        
      
        <button class="btn btn btn-primary m-3 ml-4" id="buttonLike{{post.id}}" onclick="likeFunction('{{post.id}}')">Like</button>
        <i id="liked{{post.id}}">Like : 0</i>
        
    </div>
  {% else %}
    <div id="likeunlike">
      <button disabled class="btn btn btn-primary m-3 ml-4" id="buttonLike" onclick="likeFunction('{{post.id}}')">Like</button>
    </div>
  {% endif %}


  <div class="timestamp col-3">{{post.timestamp}}</div>
</div>
{% endfor %}

<div>
  
  <nav aria-label="Page navigation example">
    <ul class="pagination step-links">
      {% if posts.has_previous %}
        <li class="page-item">
          <a class="page-link" href="?page=1" aria-label="First">
            <span aria-hidden="true">&laquo; First</span>
          </a>
        </li>
        <li class="page-item">
          <a class="page-link" href="?page={{ posts.previous_page_number }}" aria-label="Previous">
            <span aria-hidden="true">&laquo;</span>
          </a>
        </li>
      {% else %}
        <li class="page-item disabled">
          <a class="page-link" href="#" aria-label="First">
            <span aria-hidden="true">&laquo; First</span>
          </a>
        </li>
        <li class="page-item disabled">
          <a class="page-link" href="#" aria-label="Previous">
            <span aria-hidden="true">&laquo;</span>
          </a>
        </li>
      {% endif %}

      
      <span class="current">
        Page {{ posts.number }} of {{ posts.paginator.num_pages }}.
      </span>
      

      {% if posts.has_next %}
      <li class="page-item">
        <a class="page-link" href="?page={{ posts.next_page_number }}" aria-label="Next">
          <span aria-hidden="true">&raquo;</span>
        </a>
      </li>
      <li class="page-item">
        <a class="page-link" href="?page={{ posts.paginator.num_pages }}" aria-label="Last">
          <span aria-hidden="true">Last &raquo;</span>
        </a>
      </li>
      {% else %}
      <li  class="page-item disabled">
        <a class="page-link" href="#" aria-label="Next">
          <span aria-hidden="true">&raquo;</span>
        </a>
      </li>
      <li  class="page-item disabled">
        <a class="page-link" href="#" aria-label="Last">
          <span aria-hidden="true">Last &raquo;</span>
        </a>
      </li>
      {% endif %}
    </ul>
  </nav>

</div>

{% endblock %} {% block script %}
<script src="{% static 'network/main.js' %}"></script>
<script src="{% static 'network/like.js' %}"></script>
<script
  src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"
  type="text/javascript"
></script>
{% endblock %}
